$light-text {
  -moz-osx-font-smoothing: grayscale
  -webkit-font-smoothing: antialiased
}

/*
 * input: +media('<320px') { ... }
 * output: @media screen and (max-width: 320px) { ... }
 *
 * examples:
 * - +media('>100px', '<=200px')
 * - +media('>=20px', '<90px')
 */
media(conditions...) {
  params = 'screen'

  for condition in conditions {
    op = match('^<=|>=|<|>', condition)
    value = convert(match('\d+\w+$', condition))

    if (op is '<=') {
      value = value + 1
    } else if (op is '>=') {
      value = value - 1
    }

    if (op is '<' or op is '<=') {
      op = 'max-width'
    } else if (op is '>' or op is '>=') {
      op = 'min-width'
    }

    params = params + ' and (' + op + ': ' + value + ')'
  }

  @media params {
    {block}
  }
}
